window.Messenger=function(){function a(a,b){var c="";if(arguments.length<2?c="target error - target and name are both requied":"object"!=typeof a?c="target error - target itself must be window object":"string"!=typeof b&&(c="target error - target name must be string type"),c)throw new Error(c);this.target=a,this.name=b}function b(a,b){this.targets={},this.name=a,this.listenFunc=[],f=b||f,"string"!=typeof f&&(f=f.toString()),this.initListen()}function c(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a){return c({},a||{})}function e(a){var b=window.location.search,c=b.match(/&*daid=(\d+)&*/),d=b.match(/&*dassclass=(\w+)&*/),e={command:"comforum_adsense",data:{id:c&&c[1]?c[1]:0,cssclass:d&&d[1]?d[1]:"",status:a.result,height:a.height}};return e=JSON.stringify(e)}var f="[PROJECT_NAME]",g="postMessage"in window;a.prototype.send=g?function(a){this.target.postMessage(f+a,"*")}:function(a){var b=window.navigator[f+this.name];if("function"!=typeof b)throw new Error("target callback function is not defined");b(f+a,window)},b.prototype.addTarget=function(b,c){var d=new a(b,c);this.targets[c]=d},b.prototype.initListen=function(){var a=this,b=function(b){"object"==typeof b&&b.data&&(b=b.data),b=b.slice(f.length);for(var c=0;c<a.listenFunc.length;c++)a.listenFunc[c](b)};g?"addEventListener"in document?window.addEventListener("message",b,!1):"attachEvent"in document&&window.attachEvent("onmessage",b):window.navigator[f+this.name]=b},b.prototype.listen=function(a){this.listenFunc.push(a)},b.prototype.clear=function(){this.listenFunc=[]},b.prototype.send=function(a){var b,c=this.targets;for(b in c)c.hasOwnProperty(b)&&c[b].send(a)};var h=new b("adIframe","checkStatus");return h.addTarget(window.parent,"adCenter"),b.success=function(a){h.targets.adCenter.send(e(c(d(a),{result:"success"})))},b.fail=function(a){h.targets.adCenter.send(e(c(d(a),{result:"fail"})))},b}(),window.AdsenseTrack=function(a){var b=function(){var a=location.search,b={};if(-1!=a.indexOf("?"))for(var c=a.substr(1),d=c.split("&"),e=0;e<d.length;e++)b[d[e].split("=")[0]]=d[e].split("=")[1];return b},c=function(a,b,c,d){a&&(a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,d))},d=function(a,b){for(var c=new Array,d=document.getElementsByTagName(a),e="",f=new RegExp("(^|\\s)"+b+"(\\s|$)"),g=0,h=d.length;h>g;g++)e=d[g].className,f.test(e)&&c.push(d[g]);return c},e=e||{};e.stats=e.stats||{},e.stats.track=function(a){if(document.images){var b=new Image;window["bd_pv_"+(new Date).getTime()]=b;var c="http://static.tieba.baidu.com/tb/img/track.gif?",d=[];a.hasOwnProperty("trackUrl")&&(c=a.trackUrl);for(var e in a)a.hasOwnProperty(e)&&"trackUrl"!=e&&d.push(e+"="+encodeURIComponent(a[e]));c+=d.join("&"),b.src=c+"&t="+(new Date).getTime(),b=null}};var f="iframe",g="tbda",h=b(),i=h.dapage||h.da_page||"",j=h.fid||"",k=h.tid||"",l=h.dacuid||"",m=h.dauid||"",n=h.dabaiduid||"",o=(h.datypeid||"",h.daid||h.da_obj_id||""),p=decodeURIComponent(h.daname||""),q=h.dagoodid||h.da_good_id||"",r=decodeURIComponent(h.dafirstname||h.da_first_name||""),s=decodeURIComponent(h.dasecondname||h.da_second_name||""),t=h.dacpid||h.da_cpid||"",u=h.daabtest||h.da_abtest||"",v=h.daprice||h.da_price||"",w=h.daverify||h.da_verify||"",x=h.daextinfo||h.da_ext_info||"",y=h.daplanid||"",z=h.dauserid||"",A=(decodeURIComponent(h.adforumname||""),{client_type:"pc_web",task:g,da_task:g,page:i,da_page:i,locate:f,da_locate:f,da_obj_id:o,fid:j,tid:k,da_good_id:q,da_ext_info:x,da_price:v,da_verify:w,cuid:l,uid:m,baiduid:n,da_obj_name:p,da_first_name:r,da_second_name:s,da_cpid:t,da_abtest:u}),B={trackUrl:"http://tieba.baidu.com/billboard/pushlog/?",da_task:g,da_page:i,da_locate:f,da_client_type:"PC",da_obj_id:o,da_fid:j,da_tid:k,da_good_id:q,da_ext_info:x,da_plan_id:y,da_user_id:z,da_price:v,da_verify:w,da_cuid:l,da_uid:m,da_baiduid:n,da_cpid:t},C=/AppleWebKit.*Mobile/i.test(navigator.userAgent)||/Android/i.test(navigator.userAgent);C&&(A.client_type="wap_smart",B.client_type="WAP");var D=function(a,b){C&&(a.preventDefault?a.preventDefault():a.returnValue=!1,setTimeout(function(){window.open(b.getAttribute("href"),"_parent")},500)),A.type="click",A.da_type="click",e.stats.track(A),B.da_type="click",e.stats.track(B)},E=function(){c(document.getElementsByTagName("body")[0],"click",function(a){a=a||window.event;var b=a.target||a.srcElement,c="",d="";do c=b.tagName,d=b.className;while("A"!==c&&(b=b.parentNode));"A"==c&&/j_tb/.test(d)&&D(a,b)},!1),A.type="show",A.da_type="show",e.stats.track(A),B.da_type="show",e.stats.track(B)},F=0;return c(a,"load",function(){F=1,E("load")},!1),c(a,"pagehide",function(){F=0},!1),c(a,"pageshow",function(){F||E("pageshow")},!1),{addEvent:c,getRequest:b,getTagByClass:d,setupTrack:D,version:"1.0.1"}}(this),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();